{
  "resources": {
    "head": [
      {
        "type": "script",
        "src": "app.js"
      }
    ]
  },
  "preview": {
    "handlers": [
      {
        "options": ["color", "orgName"],
        "execute": "INSTALL_SCOPE.setOptions(INSTALL_OPTIONS)"
      },
      {
        "options": ["email"],
        "reload": false
      }
    ]
  },
  "options": {
    "properties": {
      "authChoice": {
        "title": "Drift Account",
        "description": "Do you already have a Drift account? If not, we can register one for you now.",
        "type": "string",
        "format": "radios",
        "enum": [
          "register",
          "login"
        ],
        "enumNames": {
          "register": "I don’t have an account. Register a Drift account for me.",
          "login": "I have a Drift account, I’d like to login."
        },
        "default": "register",
        "order": 0
      },

      "account": {
        "title": "Login",
        "type": "object",
        "format": "account",
        "services": ["drift"],
        "showIf": {
          "authChoice": "login"
        },
        "order": 10
      },

      "email": {
        "title": "Email",
        "description": "What email address would you like to use with your Drift account?",
        "type": "string",
        "showIf": {
          "authChoice": "register"
        },
        "order": 15
      },

      "orgName": {
        "title": "Organization Name",
        "description": "This is the name which will be shown to visitors. e.g. “Drift” or “Google”.",
        "type": "string",
        "default": "Your Company",
        "order": 20
      },

      "color": {
        "title": "Color",
        "type": "string",
        "format": "color",
        "default": "#2d88f3",
        "order": 30
      }
    }
  },
  "hooks": [
    {
      "endpoint": "http://provisioner.eager.io/drift/v1/hook",
      "events": ["before-new-install", "before-update-install", "option-change:account", "preview"],
      "block": true,
      "authenticate": ["account"],
      "failure": {
        "action": "notify",
        "message": "There was an error communicating with Drift."
      }
    }
  ]
}
